<!DOCTYPE html>
<meta charset="utf-8" />
<title>Future of web applications. Where client doesn't need server</title>
<meta name="description" content="Fast JavaScript web applications backed with Node.js" />
<meta name="author" content="Mariusz Nowak" />

<link rel="stylesheet" href="css/font.css" />
<link rel="stylesheet" href="css/default.css" />
<link rel="stylesheet" href="css/slides.css" />
<link rel="stylesheet" href="highlight/styles/github.css" />

<div id="impress" class="impress-not-supported">
  <div id="fm1" class="fallback-message hidden">
    <p>Your browser <b>doesn't support the features required</b> by impress.js,
      so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b> or
      <b>Safari</b> browser. Firefox 10 (to be released soon)
      will also handle it.</p>
  </div>
  <div id="fm2" class="fallback-message">
    <p>If you have fast machine and recent Google Chrome or Safari installed,
      please check <a href="3d/index.html">a bit more "moving" version of that presentation</a></p>
    <p style="text-align:center"><big>Otherwise, scroll down to see the slides</big></p>
  </div>

  <div id="heading" class="step">
    <h1>Future of web applications</h1>
    <h2>Where client doesn't need server</h2>
    <p class="footer">
      <span>September 2012</span> ·
      <a href="http://www.meetup.com/jsgeneve/events/81731522/">JS Genève</a>
    </p>
  </div>

  <div id="intro" class="step personal">
    <p class="name">Mariusz Nowak</p>
    <p class="email"><a href="mailto:mariusz@medikoo.com">mariusz@medikoo.com</a></p>
    <p class="twitter p-a"><a href="https://twitter.com/medikoo"><img src="twitter.png" /> @medikoo</a></p>
    <p class="github p-a"><a href="https://github.com/medikoo"><img src="github.png" /> github.com/medikoo</a></p>
    <p class="work p-a">Web developer at <img class="work-logo" src="unctad.png" /></p>
  </div>

  <div id="js" class="step">
    <img src="js.svg.png" style="display:block; margin: 0 auto; width:600px;" />
  </div>

  <div id="js-engines" class="step">
    <img src="javascript-engines.png" />
    <img src="nodejs.png" style="margin-left: 50px;" />
  </div>

  <div id="server-less" class="step">
    <h1>The less you do on the server The more clients you can serve</h1>
  </div>

  <div id="roche-html5" class="step">
    <h2>At begin of this year I delivered full-stack <b>HTML5</b> application</h2>
    <!-- <h2>At Roche we recently delivered <b>HTML5</b> application</h2> -->
  </div>

  <div id="code-stats" class="step">
    <h3>Client-side code statistics</h3>
    <p class="substep"><b>303 modules</b> from <b>19 packages</b></p>
    <p class="substep"><b>13 thousand lines</b> long and weights about <b>450kB</b><p>
    <p class="substep"><b>219kB</b> when minified</p>
    <p class="substep"><b>60kB</b> when minified and gzipped</p>
    <p class="substep"><i>One average picture on Facebook weights 100-500kB (depends on screen resolution)</i></p>
  </div>

  <div id="how-built" class="step">
    <h1>How is it built?</h1>
  </div>

  <div id="modules" class="step">
    <h3>Code organization</h3>
    <div class="substep">
      <h4>CommonJS (NodeJS) modules</h4>
      <p class="small">add.js</p>
      <pre><code><mark>module.exports</mark> = function() {
  var sum = 0, i = 0, args = arguments, l = args.length;
  while (i &lt; l) sum += args[i++];
  return sum;
};</code></pre>
      <p class="small">increment.js</p>
      <pre><code>var add = <mark>require</mark>('./add');
<mark>module.exports</mark> = function(val) {
  return add(val, 1);
};</code></pre>
      <p class="small">program.js</p>
      <pre><code>var inc = <mark>require</mark>('./increment');
var a = 1;
inc(a); // 2</code></pre>
    </div>
  </div>

  <div id="webmake" class="step">
    <p>Bundled for browser with <a style="white-space:nowrap" href="https://github.com/medikoo/modules-webmake">modules-webmake</a></p>
    <pre><code style="font-size: 0.75em">(function (modules) {
  // about 60 lines of import/export path resolution logic
})({
  "root": {
    "add.js": function (exports, module, require) {
      module.exports = function () {
        var sum = 0, i = 0, args = arguments, l = args.length;
        while (i &lt; l) sum += args[i++];
        return sum;
      };
    },
    "increment.js": function (exports, module, require) {
      var add = require('./add');
      module.exports = function (val) {
        return add(val, 1);
      };
    },
    "program.js": function (exports, module, require) {
      var inc = require('./increment');
      var a = 1;
      inc(a); // 2
    }
  }
})("root/program");</code></pre>
  </div>

  <div id="modules-done-right" class="step" style="text-align: center">
    <h2>More information in</h2>
    <h2><a href="http://www.slideshare.net/medikoo/javascript-modules-done-right">JavaScript Modules Done Right</a></h2>
  </div>

  <div id="data-storage" class="step">
    <h3>Data storage</h3>
    <p class="substep">Simple key/value pairs</p>
    <p class="substep"><b>mongodb</b> on a server</p>
    <p class="substep"><b>localStorage</b> on a client</p>
  </div>

  <div id="data-manipulation" class="step">
    <h3 style="margin-bottom:4.5px">Data manipulation</h3>
    <p class="substep" style="margin:4.5px 0">Evented database engine in JavaScript</p>
    <div class="substep">
      <pre style="margin: 4.5px 0;"><code style="font-size:0.75em;">var nsdoctor = db.create('doctor', {
  name: { type: 'text', label: 'Name', required: true },
  email: { type: 'email', label: 'E-mail', required: true }
});
var nspatient = db.create('patient', {
  name: { type: 'text', label: 'Name', required: true },
  doctor: { type: nsdoctor, label: 'Doctor', required: true }
});
var nsvisit = db.create('visit', {
  doctor: { type: nsdoctor, label: 'Doctor', required: true },
  patient: { type: nspatient, label: 'Patient', required: true },
  date: { type: 'datetime', label: 'Date', required: true }
});</code></pre>
    </div>
    <div class="substep">
      <p style="margin: 4.5px 0;">Objects</p>
      <pre style="margin: 4.5px 0;"><code style="font-size:0.75em;">var john = nsdoctor.create({ name: 'John Smith', email: 'john.smith@roche.com' });
// Meta:
john._id // globally unique  np. 'fsay6u234sd'
john._created // creation date
john._updated // modification date
// Visible object properties (possible only with ECMAScript5)
Object.keys(john) // ['name', 'email']</code></pre>
    </div>
  </div>

  <div id="data-collections" class="step">
    <p>Collections of given type (namespaces)</p>
    <pre><code style="font-size:0.75em;">// Unordered (hash objects)
// All visible properties are object instances:
nsdoctor // { fsay6u234sd: john }
Object.keys(nsdoctor) // ['fsay6u234sd']

var ian = nspatient.create({ name: 'Ian Tate', doctor: john });
var henry = nspatient.create({ name: 'Henry Wilkinson', doctor: john });

ian._id // 'gdsaa78sdf'
henry._id // '5rgrs23bfe'
Object.keys(nspatient) // ['gdsaa78sdf', '5rgrs23bfe']</pre></code>
    <div class="substep">
      <p>Relations</p>
      <pre><code style="font-size:0.75em;">var johnPatients = john._get(nspatient);
// Unordered
Object.keys(docPatients); // ['gdsaa78sdf', '5rgrs23bfe']

var carol = nspatient.create({ name: 'Carol Hanson', doctor: john });
carol._id // 'yuerert435'

// All data relations are updated realtime
Object.keys(johnPatients); // ['gdsaa78sdf', '5rgrs23bfe', 'yuerert435']</code></pre>
    </div>
  </div>

  <div id="data-lists" class="step">
    <p>Ordered lists</p>
    <pre><code style="font-size:0.75em;">var plist = nspatient.list('name');
plist // [carol, henry, ian]

// Updated in next event-loop
henry._set('name', 'Zahary Wilkinson');
setTimeout(function () {
  plist // [carol, ian, henry]
}, 0);</code></pre>
    <div class="substep">
      <p>Filters</p>
      <pre><code style="font-size:0.75em;">var flist = nspatient.filter('name', function (name, obj) {
  return name.indexOf('Ian') === 0;
});
Object.keys(flist) // ['gdsaa78sdf']

// Updated realtime
henry._set('name', 'Ian Wilkinson');
Object.keys(flist) // ['gdsaa78sdf', '5rgrs23bfe']

// We can created ordered lists from filters
flist.list('name') // [ian, henry]</code></pre>
    </div>
  </div>

  <div id="data-conflicts" class="step">
    <h3>Synchronization & Conflicts</h3>
    <p class="substep">No conflict resolution. Latest update wins</p>
  </div>

  <div id="templates" class="step">
    <h3>Templates</h3>
    <ul class="substep">
      <li>Pure JavaScript</li>
      <li>Object-oriented approach <p class="small">(no string serialization)</p></li>
    </ul>
  </div>

  <div id="domjs" class="step">
    <h3>Engine: <a href="https://github.com/medikoo/domjs">domjs</a></h3>
    <pre><code class="javascript" style="font-size: 0.75em;">header(
  h1('Heading'),
  h2('Subheading'));

  nav(
    ul({ 'class': 'breadcrumbs' },
      li(a({ href: '/' }, 'Home')),
      li(a({ href: '/section/'}, 'Section')),
      li(a('Subject'))));

  article(
    p('Lorem ipsum...'));

  footer('Footer stuff');</code></pre>
    <div class="substep">
      <p class="small">Construction doesn't have to be linear</p>
      <pre><code style="font-size: 0.75em;">var myul = ul(li('one'), li('two'), li('three'));
p("Lorem ipsum...");
// Add extra items to list
myul(li('four'), li('five'));
// Move list to other element
div(myul);</code></pre>
    </div>
  </div>

  <div id="routing" class="step">
    <h3>Views & Routing</h3>
    <p class="substep">Single-page application with regular links and urls</p>
    <p class="substep">Link clicks are hijacked and view changes are invoked</p>
    <p class="substep">Browser history is handled with <b>HTML5 History</b></p>
  </div>

  <div id="views" class="step">
    <p>Views are defined by describing differences from parent view</p>
    <pre><code>// |-> Home
//   |-> Profile
//   |-> Patients
//     |-> Patient
//       |-> Add visit
//   |-> Visits
//     |-> Visit

var home     = view('home.tpl');
var profile  = home.diff('profile.tpl');
var patients = home.diff('patients.tpl');
var patient  = patients.diff('patient.tpl');
var addVisit = patient.diff('add-visit.tpl');
var visits   = home.diff('visits.tpl');
var visit    = visits.diff('visit.tpl');</code></pre>
  </div>

  <div id="others" class="step">
    <h1>Other modules<h1>
  </div>

  <div id="socketio" class="step" style="text-align: center;">
    <h2><a href="http://socket.io">SocketIO</a></h2>
    <p>Handles client/server socket connections</p>
  </div>

  <div id="formidable" class="step" style="text-align: center;">
    <h2><a href="https://github.com/felixge/node-formidable">Formidable</a></h2>
    <p>Handles asynchronous files uploads on server side</p>
  </div>

  <div id="nodemailer" class="step" style="text-align: center;">
    <h2><a href="http://documentup.com/andris9/nodemailer/">Nodemailer</a></h2>
    <p>Sends email notifications</p>
  </div>

  <div id="jslint" class="step" style="text-align: center;">
    <h2><a href="https://github.com/medikoo/node-jslint">JSLint</a></h2>
    <p>Code quality guard</p>
  </div>

  <div id="mongodb" class="step" style="text-align: center;">
    <h2><a href="https://github.com/mongodb/node-mongodb-native">node-mongodb</a></h2>
    <p>MongoDB driver for Node.js</p>
  </div>

  <div id="tad" class="step" style="text-align: center;">
    <h2><a href="https://github.com/medikoo/tad">TAD</a></h2>
    <p>Test suite</p>
  </div>

  <div id="low-level" class="step">
    <h1>Low level modules<h1>
  </div>

  <div id="es5-ext" class="step" style="text-align: center;">
    <h2><a href="https://github.com/medikoo/es5-ext">es5-ext</a></h2>
    <p>Extensions to EcmaScript5 API</p>
  </div>

  <div id="deferred" class="step" style="text-align: center;">
    <h2><a href="https://github.com/medikoo/deferred">deferred</a></h2>
    <p>Aid for asynchronous programming</p>
    <p>For more info see <a href="http://medikoo.com/asynchronous-javascript/">Asynchronous JavaScript</a> slides</p>
  </div>

  <div id="event-emitter" class="step" style="text-align: center;">
    <h2><a href="https://github.com/medikoo/event-emitter">event-emitter</a></h2>
    <p>Simple cross-environment event emitter interface</p>
  </div>

  <div id="browsers-support" class="step">
    <h3>Browsers support</h3>
    <p class="substep"><b>EcmaScript 5 application</b></p>
    <p class="substep">Firefox 4+, Chrome 13+, Safari 5+, IE10+</p>
    <div class="substep">
      <p>IE9 can be supported in very limited way</p>
      <p class="small">(no Offline and no History)</p>
    </div>
  </div>

  <div id="es3" class="step">
    <h3>What about EcmaScript 3 engines?</h3>
    <p class="substep">With same code we can serve <b>static pages</b> using NodeJS server</p>
  </div>

  <div id="trend-growing" class="step">
    <h1>Trend is growing</h1>
  </div>

  <div id="trend" class="libs-list step">
    <div class="meteor lib"><a href="http://www.meteor.com/"><span>Meteor</span></a></div>
    <div class="socket-stream"><a href="http://www.socketstream.org/"><img src="socket-stream.png" /></a></div>
    <div class="derby"><a href="http://derbyjs.com/">Derby</a></div>
    <div class="ember"><a href="http://emberjs.com/"><img src="ember.png" /></a></div>
    <div class="spine"><a href="http://spinejs.com/">Spine</a></div>
  </div>

  <div id="questions" class="step">
    <h2>Questions?</h2>
  </div>

  <div id="thank-you" class="step personal">
    <h2>Thank you !</h2>

    <p class="name">Mariusz Nowak</p>
    <p class="email"><a href="mailto:mariusz@medikoo.com">mariusz@medikoo.com</a></p>
    <p class="twitter p-a"><a href="https://twitter.com/medikoo"><img src="twitter.png" /> @medikoo</a></p>
    <p class="github p-a"><a href="https://github.com/medikoo"><img src="github.png" /> github.com/medikoo</a></p>
  </div>

  <div id="overview" class="step" data-x="2600" data-y="600" data-scale="10"></div>
  <div class="hint"><p>Use a spacebar or arrow keys to navigate</p></div>
</div>

<div id="timer"></div>

<script src="highlight/highlight.pack.js"></script>
<script src="js/impress.js"></script>
<script src="js/default.js"></script>
</body>
</html>
